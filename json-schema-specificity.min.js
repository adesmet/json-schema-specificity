!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jsonSchemaSpecificity=t():e.jsonSchemaSpecificity=t()}(this,(()=>(()=>{"use strict";var e={};return(()=>{function t(e,t){const i=Array.isArray(e)?e:[e];return(Array.isArray(t)?t:[t]).every((e=>i.some((t=>t===e||"number"===t&&"integer"===e))))}function i(e,t){if(!e||!t)return!1;if(e.type!==t.type&&("number"!==e.type||"integer"!==t.type))return!1;if("object"===e.type&&"object"===t.type){if(!e.properties||!t.properties)return!1;const n=new Set(e.required||[]),r=new Set(t.required||[]);for(const[m,u]of Object.entries(e.properties))if(n.has(m)){let e=!1;for(const[n,m]of Object.entries(t.properties))if(r.has(n)&&i(u,m)){e=!0;break}if(!e)return!1}}return"array"!==e.type||"array"!==t.type||!(!e.items||!t.items)&&i(e.items,t.items)}function n(e){return void 0!==e.minimum?e.minimum:void 0!==e.exclusiveMinimum?e.exclusiveMinimum+1:null}function r(e){return void 0!==e.maximum?e.maximum:void 0!==e.exclusiveMaximum?e.exclusiveMaximum-1:null}e.default={isMoreSpecific:function e(m,u){var o,s;if(!m||!u)return!1;if(m.type&&u.type&&!t(m.type,u.type))return!1;if(void 0!==m.const&&(void 0===u.const||u.const!==m.const))return!1;if(m.required&&u.required)for(const t of m.required){const n=null===(o=m.properties)||void 0===o?void 0:o[t];if(!n)continue;let r=!1;for(const[m,o]of Object.entries(u.properties||{}))if((m===t||u.required.includes(m))&&i(n,o)){if(r=!0,!e(n,o))return!1;break}if(!r)return!1}if(m.properties)for(const[t,n]of Object.entries(m.properties)){let r=!1;for(const[,t]of Object.entries(u.properties||{}))if(i(n,t)){if(!e(n,t))return!1;r=!0;break}if(!r&&(null===(s=m.required)||void 0===s?void 0:s.includes(t)))return!1}if(!1===m.additionalProperties&&!1!==u.additionalProperties)return!1;if(m.enum&&u.enum){if(!u.enum.every((e=>m.enum.includes(e))))return!1;if(0===u.enum.length)return!1}return!(!("number"!==m.type&&"integer"!==m.type||function(e,t){const i=n(e),m=r(e),u=n(t),o=r(t);return!(null!==i&&null!==m&&i>m)&&(!(null!==u&&null!==o&&u>o)&&(!(null!==i&&null!==u&&u<i)&&(!(null!==m&&null!==o&&o>m)&&(!(null!==m&&null!==u&&u>m)&&(!(null!==i&&null!==o&&o<i)&&(void 0===e.multipleOf||void 0===t.multipleOf||t.multipleOf%e.multipleOf==0))))))}(m,u))||"array"===m.type&&!function(t,i){var n,r,m,u;const o=null!==(n=t.minItems)&&void 0!==n?n:0,s=null!==(r=t.maxItems)&&void 0!==r?r:1/0,l=null!==(m=i.minItems)&&void 0!==m?m:0,p=null!==(u=i.maxItems)&&void 0!==u?u:1/0;return!(o>s||l>p)&&(!(l<o||p>s)&&(!(l>s||o>p)&&(!(t.uniqueItems&&!i.uniqueItems)&&!(t.items&&i.items&&!e(t.items,i.items)))))}(m,u)||"string"===m.type&&!function(e,t){var i,n,r,m;const u=null!==(i=e.minLength)&&void 0!==i?i:0,o=null!==(n=e.maxLength)&&void 0!==n?n:1/0,s=null!==(r=t.minLength)&&void 0!==r?r:0,l=null!==(m=t.maxLength)&&void 0!==m?m:1/0;return!(u>o||s>l)&&(!(s<u||l>o)&&(!(s>o||u>l)&&(!e.pattern||!t.pattern||e.pattern===t.pattern)))}(m,u))},createExtension:function e(i,n){var r;if(!i||!n)return i||n||{};const m={...i};if(n.type){const e=Array.isArray(i.type)?i.type:[i.type||"object"],r=(Array.isArray(n.type)?n.type:[n.type]).filter((t=>e.some((e=>e===t||"number"===e&&"integer"===t))));if(0===r.length)m.type=i.type||"object";else{const e=r.filter((e=>!r.some((i=>e!==i&&t(e,i)))));m.type=Array.isArray(i.type)?e:1===e.length?e[0]:e}}if(void 0!==n.const&&(m.const=n.const),n.enum&&(i.enum?m.enum=n.enum.filter((e=>i.enum.includes(e))):m.enum=n.enum),"number"!==i.type&&"integer"!==i.type||"number"!==n.type&&"integer"!==n.type||(void 0!==n.minimum&&(m.minimum=Math.max(n.minimum,i.minimum||-1/0)),void 0!==n.maximum&&(m.maximum=Math.min(n.maximum,i.maximum||1/0)),void 0!==n.exclusiveMinimum&&(m.exclusiveMinimum=Math.max(n.exclusiveMinimum,i.exclusiveMinimum||-1/0)),void 0!==n.exclusiveMaximum&&(m.exclusiveMaximum=Math.min(n.exclusiveMaximum,i.exclusiveMaximum||1/0)),void 0!==n.multipleOf&&(void 0!==i.multipleOf?n.multipleOf%i.multipleOf==0&&(m.multipleOf=n.multipleOf):m.multipleOf=n.multipleOf)),"array"===i.type&&"array"===n.type&&(void 0!==n.minItems&&(m.minItems=Math.max(n.minItems,i.minItems||0)),void 0!==n.maxItems&&(m.maxItems=Math.min(n.maxItems,i.maxItems||1/0)),void 0!==n.uniqueItems&&(m.uniqueItems=n.uniqueItems||i.uniqueItems),n.items&&i.items&&(m.items=e(i.items,n.items))),"string"===i.type&&"string"===n.type&&(void 0!==n.minLength&&(m.minLength=Math.max(n.minLength,i.minLength||0)),void 0!==n.maxLength&&(m.maxLength=Math.min(n.maxLength,i.maxLength||1/0)),void 0!==n.pattern&&(m.pattern=n.pattern)),"object"===i.type||"object"===n.type){if(void 0!==n.additionalProperties&&(m.additionalProperties=n.additionalProperties&&!1!==i.additionalProperties),n.properties){m.properties=m.properties||{};for(const[t,u]of Object.entries(n.properties)){const n=null===(r=i.properties)||void 0===r?void 0:r[t];m.properties[t]=n?e(n,u):u}}n.required&&(m.required=Array.from(new Set([...i.required||[],...n.required])))}return m}}})(),e.default})()));